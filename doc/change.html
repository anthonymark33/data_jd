<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">
<title>Jd Ops change</title>
<link rel="stylesheet" href="jda.css" type="text/css">

<body>
<div class=masthead>
<img src="./jblue.png" width="50px" height="50px"/>
<span class=md>d</span>
<span class=mt>&nbsp;Ops change</span>
<span class=ms><a href="http://www.jsoftware.com" target="_blank">www.jsoftware.com</a><br>J database - J language<br>columnar analytics</span>
</div>

<div contenteditable="false">
<code>
<a href="#delete">delete</a> <a href="#insert">insert</a> <a href="#modify">modify</a> <a href="#update">update</a>

<hr><a name="delete"><h2>delete</h2></a>
delete table <a href="#where">where</a>

NB. example delete
jdadminx'example'[olddan=:jdaccess''
jd'createtable f a int,b byte 4'
jd'insert f';'a';24 25 26;'b';3 4$'aaaabbbbcccc'
jd'delete f a=24'
jd'delete f';'a=26'
jd'reads from f'
jdaccess olddan

<hr><a name="insert"><h2>insert</h2></a>
insert table col data ...

col data pairs
count of data items must be the same

insert of duplicates (createunique) marks older rows as deleted
and gives an error warning
 
NB. example insert
jdadminx'example'[olddan=:jdaccess''
jd'createtable f a int,b byte,b4 byte 4'
jd'insert';'f';'a';23;'b';'a';'b4';1 4$'abcd'
jd'reads from f'
jd'insert';'f';'a';24 25;'b';'bc';'b4';2 4$'aaaabbbb'
jd'reads from f'
jd'createtable g'
jd'createcol g a int _';i.3
jd'createunique g a'
jd etx'insert g a';2
;1{jdlast
jd'reads jdindex,a from g'
jdaccess olddan

<hr><a name="modify"><h2>modify</h2></a>
modify table <a href="#where">where</a> col data  ...
modify table indexes col data ...

updates selected row cols in place
data items are scalar extended
can not modify col if it has dynamics
col data pairs (as for insert and update)

indexes are row indexes

NB. example modify
jdadminx'example'[olddan=:jdaccess''
jd 'createtable f a int,b int,c byte 4'
jd 'insert f';'a';24 25 26;'b';100 101 102;'c';3 4$'aaaabbbbcccc'
jd'reads from f'
jd 'modify f';'a=24';'b';200
jd'reads from f'
jd 'modify f';'a<26';'b';300;'c';2 4$'xxxxzzzz' NB. 300 scalar extends
jd'reads from f'
'i b'=: {:"1 jd'read jdindex,b from f where a in (24,26)'
jd'modify f';i;'b';b+1 NB. modify with indexes
jd'reads from f'
jdaccess olddan

<hr><a name="update"><h2>update</h2></a>
update table <a href="#where">where</a> col data  ...

deletes selected records and inserts new updated records
count of data items and updated rows must be the same
col data pairs

NB. example update
jdadminx'example'[olddan=:jdaccess''
jd 'createtable f a int,b int,c byte 4'
jd 'insert f';'a';24 25 26;'b';100 101 102;'c';3 4$'aaaabbbbcccc'
jd'reads from f'
jd 'update f';'a=24';'b';200
jd'reads from f'
jd 'update f';'a<26';'b';300 400;'c';2 4$'xxxxzzzz'
jd'reads from f'
jdaccess olddan

</code></div></div></body></html>
