<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">
<title>Jd Ops table-table</title>
<link rel="stylesheet" href="jda.css" type="text/css">

<body>
<div class=masthead>
<img src="./jblue.png" width="50px" height="50px"/>
<span class=md>d</span>
<span class=mt>&nbsp;Ops table-table</span>
<span class=ms><a href="http://www.jsoftware.com" target="_blank">www.jsoftware.com</a><br>J database - J language<br>columnar analytics</span>
</div>

<div contenteditable="false">
<code>
<a href="#tableappend">tableappend</a> <a href="#tableinsert">tableinsert</a> <a href="#tablecopy">tablecopy</a> <a href="#tablemove">tablemove</a>

tutorial table_table

<hr><a name="tableappend"><h2>tableappend</h2></a>
tableappend snktable srctable srcdan  - implicit jdaccess'srcdan'

implemented as a loop over corresponding cols
reads src col file and appends to snk col file
insists there are no dynamic columns as they would not be updated
copies deleted rows and their deleted status

for bulk updates (lots of new data from csv files for multiple tables)
dropdynamic/tableappends/createdynamic can be faster than tableinsert

NB. example tableappend
jdadminx'example'[olddan=:jdaccess''
jd 'createtable f a int'
jd 'insert f';'a';i.2
jdadminx'example2'
jd 'createtable g a int'
jd 'insert g';'a';100+i.2
jdaccess'example'
jd'tableappend f g example2'
jd'reads from f'
jdaccess olddan

<hr><a name="tablecopy"><h2>tablecopy</h2></a>
tablecopy snktable srctable srcdan  - implicit jdaccess'srcdan'

copies a table from srcdan to the current db
uses host file copy and runs as fast as hardware allows

NB. example tablecopy
jdadminx'example'[olddan=:jdaccess''
jdadminx'example2'
jd 'createtable f a int'
jd 'insert f';'a';i.2
jdaccess'example'
jd'tablecopy new f example2'
jd'reads from new'
jdaccess olddan

<hr><a name="tableinsert"><h2>tableinsert</h2></a>
tableinsert snktable srctable srcdan  - implicit jdaccess'srcdan'

implemented as a loop of block read/insert
read ignores deleted rows in the src table
insert updates dynamic columns in the snk database

for large, complex updates it might be faster to use tableappend

NB. example tableinsert
jdadminx'example'[olddan=:jdaccess''
jd 'createtable f a int'
jd 'insert f';'a';i.2
jdadminx'example2'
jd 'createtable g a int'
jd 'insert g';'a';100+i.2
jdaccess'example'
jd'tableinsert f g example2'
jd'reads from f'
jdaccess olddan

<hr><a name="tablemove"><h2>tablemove</h2></a>
tablemove snktable srctable srcdan  - implicit jdaccess'srcdan'

moves a table from srcdan to the current db
uses host file move and runs fast as it justs updates pointers

srcdan must be on the same file hardware for move to work

NB. example tablemove
jdadminx'example'[olddan=:jdaccess''
jdadminx'example2'
jd 'createtable f a int'
jd 'insert f';'a';i.2
jdaccess'example'
jd'tablemove new f example2'
jd'reads from new' NB. table f in dan example2 no longer exists
jdaccess olddan
</code></div></div></body></html>